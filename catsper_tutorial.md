{% include breadcrumbs.html %}

# CaTSper Step-by-step Tutorial
This tutorial introduces the CaTSper tool and how to use it to calculate the frequency dependent absorption cofficient and refractive index spectra from a set of sample and reference time-domain waveforms, that were previously converted into the .thz file format using the CambridgeTHzConverter tool (https://github.com/CamTHz/CambridgeTHzConverter).

## To Convert the Project Data
### Load the raw dataset
Catsper will read the .mat file created by the App “Catsper MAT Converter” who read the h5d format data generated by the terahertz instrument. In this example, the Terapulse 4000 (Teraview) spectrometer record the data in the .tprj document. The user needs to convert the raw data set into this .mat file in the first place.

Click the “IMPORT PROJECT(S)” button to browse the folder and select the raw data file for conversion. The selected document’s name will appear in the textbox without the suffix. Then choose the “TDS Instrument” that records the dataset. The current version only supports “TeraPulse 4000_UCAM” whilst the rest will be updated in subsequent releases.

Click the “CONVERT DATA” button and the App will read the raw data. A message “Loading…” followed by the “…%” will appear at the upper right corner showing the extent of conversion.

When the conversion finishes, the message “Conversion Complete” will appear and the data will be recorded in arrays shown at the centre panel. User can check if the data have been correctly converted in this panel.

### Save the .mat file
If the user wants to keep the data, simply press the “EXPORT M FILE” button and choose the folder path where the .mat file will be stored. The .mat file contains a 16*[number of waveforms recorded] array of data named “Tcell”.

### Convert another dataset
Press the “CLEAR MEMORY” button in the first instance and confirm this action in the message shown. Then follow the procedure in the Load the raw dataset section to load another raw data file into the converter.

### Load extra datasets for CSV file
The terahertz instrument might not record, e.g., the thickness of the sample (mm) and temperature (K) at which the measurements were undertaken. The converter allows user to import these data from .csv file into the converted datasets (rows #9 and #10). Click the “Thickness” or “Temperature” button at the bottom left corner to choose the .csv file.

### Load the converted dataset (.mat file)
Occasionally, the user might export the converted dataset without the thickness and temperature data. The “IMPORT M FILE” button enables the user to load back the converted .mat file into the converter and add extra data following the procedure outlined in the Load extra datasets for CSV file section. This functionality can also be used to check the .mat file.


## To Load/Remove a Project into Catsper

### Check the .mat file properties
Please ensure the “Name” row in the “Tcell” array has been correctly assigned with certain distinguishable value for each waveform recorded, otherwise, nothing will be displayed in the “Measurement” list box in the Catsper user interface. This can be done by loading the .mat file back into the “Catspet MAT Converter”.

### Import the .mat file to Catsper
Click the “Import Catsper MAT file (Tcell)” button at the top of the Catsper user interface and selected the .mat file created by the “Catspet MAT Converter”. The “Project” edit field will display the name of the file imported without the “.mat” suffix. If the measurements (or terahertz waveforms recorded) are assigned with certain names, they will all appear in the “Measurement” list box. Otherwise, please check the .mat file properties.

### Clear the app memory and remove all existing data
Click the “CLEAR MEMORY” button at the top of the Catsper user interface. A dialogue box will pop out to confirm this action “Do you want to clear memory?” 

A “Yes” answer will remove all entries and items from the “Measurement” and “Selection” list boxes and reset the MATLAB workspace. A “No” or “Cancel” answer will keep the existing data and take the user back to the Catsper user interface.


## Time Domain (TD) Tab
### Load Data

## Frequency Domain (FD) Tab

## Data Manipulation (DM) Tab
